# 모듈 1 - 랩 2 - 연습 2 - Azure AD 스마트 잠금 배포 

Adatum의 CTO가 Azure AD 스마트 잠금 배포를 요청했습니다. 스마트 잠금을 배포하면 사용자 암호 추측을 시도하거나 무차별 암호 대입(brute force) 방법을 사용하여 네트워크 액세스를 시도하는 공격자를 차단할 수 있습니다. 스마트 잠금은 유효한 사용자가 시도하는 로그인을 인식하여 공격자 및 기타 알 수 없는 출처로부터의 로그인과 다른 방식으로 처리합니다. 

CTO가 스마트 잠금을 구현하려는 이유는, 공격자는 차단하면서 Adatum 사용자는 개인 계정에 계속 액세스하여 업무 생산성을 유지하도록 지원하기 위해서입니다. CTO는 사용자가 같은 암호를 여러 번 사용하지 못하도록 하고 너무 단순하거나 일반적인 것으로 간주되는 암호도 사용하지 못하도록 스마트 잠금을 구성해 달라고 요청했습니다. 

1. 도메인 컨트롤러(**LON-DC1**)에서 **서버 관리자**가 이미 열려 있으면 작업 표시줄에서 서버 관리자 아이콘을 선택하고, 열려 있지 않으면 지금 엽니다.

2. **서버 관리자**의 오른쪽 위 메뉴 모음에서 **도구**를 선택하고 드롭다운 메뉴에서 **그룹 정책 관리**를 선택합니다.

3. 필요한 경우 **그룹 정책 관리** 창을 최대화합니다.

4. 조직의 계정 잠금 정책이 포함된 그룹 정책을 편집할 수 있습니다. 필요한 경우 루트 콘솔 트리에서 **Forest:Adatum.com**, **domains**, **Adatum.com**을 차례로 확장합니다.  <br/>

‎**Adatum.com** 아래에서 **기본 도메인 정책**을 마우스 오른쪽 단추로 클릭하고 메뉴에서 **편집**을 선택합니다.

5. **그룹 정책 관리 편집기** 창을 최대화합니다.

6. 오른쪽 창의 **기본 도메인 정책** 트리에서 **컴퓨터 구성** > **정책** > **Windows 설정** > **보안 설정** > **계정 정책**으로 이동합니다.

7. **계정 정책** 폴더에서 **계정 잠금 정책**을 선택합니다.

8. 오른쪽 창에 표시되는 것처럼 스마트 잠금 매개 변수는 정의되어 있지 않습니다. 여기서는 **Azure AD 관리 센터**를 사용하여 매개 변수의 값을 할당합니다.   <br/>

9.  **Internet Explorer**에서 새 브라우저 탭을 열고 `https://portal.azure.com`으로 이동합니다.  다른 브라우저 탭에서 아직 로그인하지 않았다면 Holly Dickson으로 로그인합니다. **Azure Active Directory**를 검색한 후 **Azure Active Directory**를 클릭합니다. 

10. **Adatum Corporation | ****개요** 페이지의 가운데 탐색 창 내 **관리** 섹션에서 아래쪽으로 스크롤하여 **보안**을 선택합니다.

11. **보안 | ****시작** 창의 가운데 창 내 **관리** 섹션에서 **인증 방법**을 선택합니다.

12. **인증 방법 | ****인증 방법 정책(미리 보기)** 창의 가운데 창 내 **관리** 섹션에서 **암호 보호**를 선택합니다.

13. **인증 방법 | ****암호 보호** 창 오른쪽의 세부 정보 창에 다음 정보를 입력합니다.

	- **사용자 지정 스마트 잠금** 섹션:

		- **잠금 임계값:** 첫 번째 잠금 전에 계정에서 허용되는 로그인 실패 횟수를 지정하는 필드입니다. 기본값은 10입니다. Adatum에서는 테스트를 위해 이 임계값을 `3`으로 설정해 줄 것으로 요청했습니다.

		- **잠금 시간(초):** 각 잠금의 시간(초)입니다. 기본값은 60초(1분)입니다. Adatum에서는 이 시간을 `90`초로 변경해 줄 것을 요청했습니다.

	- **사용자 지정 금지된 암호** 섹션:

		- **사용자 지정 목록 적용**: **예** 선택

		- **사용자 지정 금지 암호 목록:** 다음 값을 입력합니다(값이 한 줄에 하나씩 입력되도록 각 값을 입력한 후에 Enter 키를 눌러야 함).

			- `Password01`

			- `F00tball01`

			- `Se@Hawks1`

			- `Never4get!!`

14. 페이지 위쪽 메뉴 모음에서 **저장**을 선택합니다.

15. 이제 금지된 암호 기능을 테스트해야 합니다. 화면 오른쪽 위에서 Holly Dickson의 사용자 아이콘을 선택하고 **계정 보기**를 클릭합니다. 그런 다음 표시되는 메뉴에서 **암호 변경**을 선택합니다.

16. 새 탭이 열리고 **암호 변경** 창이 표시됩니다. **이전 암호** 필드에는 `Pa55w.rd`를 입력하고 **새 암호 만들기** 및 **새 암호 확인** 필드에는 `Never4get!!`을 입력한 후에 **제출**을 선택합니다. 표시되는 오류 메시지를 확인합니다.

17. 브라우저에서 **암호 변경** 탭을 닫습니다. 

18. 이제 잠금 임계값 기능을 테스트해야 합니다. **내 대시보드 - Azure Active Directory 관리 센터** 탭의 화면 오른쪽 위에서 Holly Dickson의 사용자 아이콘을 선택합니다. 그런 다음 표시되는 메뉴에서 **로그아웃**을 선택합니다. 

19. Holly의 계정에서 로그아웃하면 **계정 선택** 창이 표시됩니다. **다른 계정 사용**을 선택합니다. 

20. **로그인** 창에 **AllanD@M365xZZZZZZ.onmicrosoft.com**을 입력하고(여기서 ZZZZZZ는 랩 호스팅 공급자가 할당한 테넌트 접미사 ID임) **다음**을 선택합니다. 

21. **암호 입력** 창에 원하는 문자 조합을 입력하고 **로그인**을 선택합니다. 그러면 잘못된 암호 오류 메시지가 표시됩니다. 이 단계를 두 번 더 반복합니다. **잠금 임계값**을 **3**으로 설정했으므로 세 번째 시도 이후에 표시되는 오류 메시지를 확인합니다. 무단 액세스를 방지하기 위해 Allan의 계정이 일시적으로 잠겼다는 메시지가 표시됩니다. <br/>

	**참고:** 앞에서 설정한 **잠금 시간(90초)** 동안은 Allan으로 로그인할 수 없습니다. 

22. 90초가 지난 후에 로그인을 다시 시도하여 로그인할 수 있음을 확인합니다. 

# 랩 종료
 
